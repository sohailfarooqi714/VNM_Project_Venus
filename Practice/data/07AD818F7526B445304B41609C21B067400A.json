{
    "uid": "07AD818F7526B445304B41609C21B067400A",
    "isLoaded": true,
    "lastModificationTime": 0,
    "items": {
        "name": "Template_DataScrollView",
        "type": "game_script",
        "order": 17,
        "parentId": "2A0E8A67K5BAAA4D7AS9017ED220E9EFFCA7",
        "folder": false,
        "content": "ui.UiFactory.customTypes[\"ui.DataScrollView\"] = {\n    \"type\": \"ui.FreeLayout\",\n    \"clipRect\": true,\n    \"controls\": [\n        {\n            \"type\": \"ui.ScrollBar\",\n            \"frame\": [0, 0, 15, \"100%\"],\n            \"updateBehavior\": \"continuous\",\n            \"formulas\": [\n                $ -> \n                    o.numbers[0] = o.numbers[0] or 0\n                    if o.parent.controls[1].scrollableHeight > 0 and o.numbers[0] != o.controls[0].dstRect.y\n                        o.numbers[0] = o.controls[0].dstRect.y\n                        o.parent.controls[1].scrollOffsetY = o.controls[0].dstRect.y / (o.parent.dstRect.height - o.controls[0].dstRect.height) * o.parent.controls[1].scrollableHeight\n                    if o.parent.controls[1].scrollableHeight > 0 then o.controls[0].dstRect.height = Math.max(o.parent.dstRect.height / o.parent.controls[1].contentHeight * o.parent.dstRect.height, 30)\n                    o.visible = false if o.parent.controls[1].scrollableHeight <= 0                \n                    o.visible = true if o.parent.controls[1].scrollableHeight > 0 \n                \n            ],\n            \"margin\": [0, 0, 0, 0],\n            \"alignmentX\": \"right\"\n        },\n        {\n            \"type\": \"ui.DataGrid\",\n            \"id\": \"mygrid\",\n            \"formulas\": [\n                $ ->\n                    o.numbers[0] = o.numbers[0] or 0\n                    if o.numbers[0] != o.scrollOffsetY\n                        o.numbers[0] = o.scrollOffsetY\n                        o.parent.controls[0].controls[0].dstRect.y = o.scrollOffsetY / o.scrollableHeight * (o.dstRect.height - o.parent.controls[0].controls[0].dstRect.height)\n                        o.parent.controls[0].numbers[0] = o.parent.controls[0].controls[0].dstRect.y\n                \n            ],\n            #\"bindings\": [{ \"event\": { \"onChange\": \"o.scrollOffsetY\" }, \"sourceField\": \"o.scrollOffsetY\", \"targetField\": \"o.parent.controls[0].controls[0].dstRect.y\", \"convertRatio\": { \"source\": \"o.scrollableHeight\", \"targetSize\": \"o.parent.controls[0].controls[0].dstRect.height\", \"offset\": 0, \"target\": \"o.dstRect.height\" }, \"breakChain\": [\"o.parent.controls[0]\"] }],\n            \"frame\": [0, 0, \"100%\", \"100%\"],\n            \"template\": -> p.template\n            \"dataSource\": -> p.dataSource\n            \"spacing\": -> p.spacing\n            \"columns\": -> p.columns ? 1\n        }\n    ]\n}",
        "compiledContent": "// Generated by CoffeeScript 1.12.7\n(function() {\n  ui.UiFactory.customTypes[\"ui.DataScrollView\"] = {\n    \"type\": \"ui.FreeLayout\",\n    \"clipRect\": true,\n    \"controls\": [\n      {\n        \"type\": \"ui.ScrollBar\",\n        \"frame\": [0, 0, 15, \"100%\"],\n        \"updateBehavior\": \"continuous\",\n        \"formulas\": [\n          $(function() {\n            o.numbers[0] = o.numbers[0] || 0;\n            if (o.parent.controls[1].scrollableHeight > 0 && o.numbers[0] !== o.controls[0].dstRect.y) {\n              o.numbers[0] = o.controls[0].dstRect.y;\n              o.parent.controls[1].scrollOffsetY = o.controls[0].dstRect.y / (o.parent.dstRect.height - o.controls[0].dstRect.height) * o.parent.controls[1].scrollableHeight;\n            }\n            if (o.parent.controls[1].scrollableHeight > 0) {\n              o.controls[0].dstRect.height = Math.max(o.parent.dstRect.height / o.parent.controls[1].contentHeight * o.parent.dstRect.height, 30);\n            }\n            if (o.parent.controls[1].scrollableHeight <= 0) {\n              o.visible = false;\n            }\n            if (o.parent.controls[1].scrollableHeight > 0) {\n              return o.visible = true;\n            }\n          })\n        ],\n        \"margin\": [0, 0, 0, 0],\n        \"alignmentX\": \"right\"\n      }, {\n        \"type\": \"ui.DataGrid\",\n        \"id\": \"mygrid\",\n        \"formulas\": [\n          $(function() {\n            o.numbers[0] = o.numbers[0] || 0;\n            if (o.numbers[0] !== o.scrollOffsetY) {\n              o.numbers[0] = o.scrollOffsetY;\n              o.parent.controls[0].controls[0].dstRect.y = o.scrollOffsetY / o.scrollableHeight * (o.dstRect.height - o.parent.controls[0].controls[0].dstRect.height);\n              return o.parent.controls[0].numbers[0] = o.parent.controls[0].controls[0].dstRect.y;\n            }\n          })\n        ],\n        \"frame\": [0, 0, \"100%\", \"100%\"],\n        \"template\": function() {\n          return p.template;\n        },\n        \"dataSource\": function() {\n          return p.dataSource;\n        },\n        \"spacing\": function() {\n          return p.spacing;\n        },\n        \"columns\": function() {\n          var ref;\n          return (ref = p.columns) != null ? ref : 1;\n        }\n      }\n    ]\n  };\n\n}).call(this);\n"
    },
    "summary": [
        "name",
        "type"
    ],
    "externalItems": []
}