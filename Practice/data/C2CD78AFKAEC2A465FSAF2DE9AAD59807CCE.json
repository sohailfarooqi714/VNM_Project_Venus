{
    "uid": "C2CD78AFKAEC2A465FSAF2DE9AAD59807CCE",
    "isLoaded": true,
    "lastModificationTime": 0,
    "items": {
        "name": "Layout_CGGallery",
        "type": "game_script",
        "order": 2,
        "parentId": "A588F305KAB2DA4236SB838E7FF9BBA890FD",
        "folder": false,
        "content": "ui.UiFactory.layouts.cgGalleryLayout = {\n    \"type\": \"ui.FreeLayout\",\n    \"orientation\": \"vertical\",\n    \"preload\": {\n        \"graphics\": [\n            { \"name\": $ -> $dataFields.database.system.menuBackground.name or 'bg-generic' },\n            { \"path\": ($ -> $dataFields.database.cgGalleryArray), \"image\": ($ -> o.thumb?.name ? o)},\n            { \"path\": [\"locked\"], \"image\": ($ -> o)}\n        ]\n    },\n    \"frame\": [0, 0, Graphics.width, Graphics.height],\n    \"controls\": [\n        {\n            \"id\": \"background\",\n            \"type\": \"ui.Image\",\n            \"imageHandling\": 0,\n            \"image\": -> $dataFields.database.system.menuBackground.name or 'bg-generic',\n            \"frame\": [0, 0, Graphics.width, Graphics.height]\n        },\n        {\n            \"type\": \"ui.Button\",\n            \"id\": \"backButton\",\n            \"params\": { \"text\": { \"lcId\": \"B0FD4BF121D9E44E7589CDD35869F86F2227\", \"defaultText\": \"Back\" }, \"action\": { \"name\": \"previousLayout\" } },\n            \"frame\": [Graphics.width - 170, Graphics.height - 65, 150, 45],\n            \"order\": 1\n        },\n        {\n            \"type\": \"ui.TitledWindow\",\n            \"components\": [{ \"type\": \"Component_HotspotBehavior\", \"params\": {} }],\n            \"id\": \"galleryWindow\",\n            \"frame\": [20, 0, 220, Graphics.height],\n            \"params\": { \"title\": { \"lcId\": \"F957AB5C572C3642839AAB12D429F0C1AA3C\", \"defaultText\": \"Chapters\" } }\n        },\n        {\n            \"type\": \"ui.DataScrollView\",\n            \"frame\": [20, 10 + 45, 220, Graphics.height - 45 - 10],\n            \"params\": {\n                \"spacing\": [10, 10],\n                \"columns\": 1,\n                \"dataSource\": $ -> $dataFields.chapters\n                \"template\": {\n                    \"size\": [220, 45],\n                    \"descriptor\": {\n                        \"type\": \"ui.Text\",\n                        \"formulas\": [$ -> \n                            o.text = $dataFields.chapters[o.index].items.name\n                            if @onInitialize and o.index == 0 then o.ui.selected = yes\n                        ],\n                        \"font\": { \"name\": \"Times New Roman\", \"italic\": true, \"size\": 45 },\n                        \"style\": \"selectableText\",\n                        \"selectable\": true,\n                        \"group\": \"chapters\",\n                        \"frame\": [0, 0],\n                        \"sizeToFit\": true,\n                        \"action\": { \n                            \"event\": \"onAccept\",\n                            \"name\": \"executeFormulas\", \n                            \"params\": [\n                                $ -> $scrollView.controls[1].behavior.dataSource = $dataFields.cgGalleryByChapter[$dataFields.chapters[o.index].uid]\n                            ]\n                        }\n                    }\n                }\n            }\n        },\n        {\n            \"type\": \"ui.TitledWindow\",\n            \"components\": [{ \"type\": \"Component_HotspotBehavior\", \"params\": {} }],\n            \"id\": \"galleryWindow\",\n            \"frame\": [260, 0, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height],\n            \"params\": { \"title\": { \"lcId\": \"A80D12A37EE45448BD2A2695D7C86820AB03\", \"defaultText\": \"Gallery\" } }\n        },\n        {\n            \"type\": \"ui.DataScrollView\",\n            \"chainOrder\": 3,\n            \"id\": \"scrollView\",\n            \"frame\": [260, 10 + 45, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height - 45 - 10],\n            \"params\": {\n                \"spacing\": [10, 10],\n                \"columns\": Math.floor(gs.UIConstants.CG_GALLERY_CONTENT_WIDTH / 165),\n                \"dataSource\": $ -> $dataFields.cgGalleryByChapter[$dataFields.chapters[0]?.uid]\n                \"template\": {\n                    \"size\": [165, 124],\n                    \"descriptor\": {\n                        \"type\": \"ui.FreeLayout\",\n                        \"frame\": [0, 0],\n                        \"sizeToFit\": true,\n                        \"group\": \"gallery\",\n                        \"style\": \"cgGalleryImage\",\n                        \"controls\": [\n                            {\n                                \"type\": \"ui.Frame\",\n                                \"style\": \"cgGalleryImageFrame\",\n                                \"frame\": [0, 0, \"100%\", \"100%\"],\n                                \"padding\": [-16, -16, -16, -16],\n                                \"zIndex\": 10,\n                                \"actions\": [\n                                    { \n                                        \"condition\": { \"field\": ($ -> o.parent.controls[1].image), \"notEqualTo\": ($ -> 'locked') },  \n                                        \"name\": \"executeFormulas\", \n                                        \"params\": [$ -> $tempFields.selectedImage = o.parent.data[0].graphic.name]\n                                    },\n                                    { \n                                        \"condition\": { \"field\": ($ -> o.parent.controls[1].image), \"notEqualTo\": ($ -> 'locked') },  \n                                        \"name\": \"switchLayout\", \n                                        \"params\": { \"name\": \"cgGalleryImageLayout\", \"savePrevious\": true }\n                                    }\n                                ]\n                            },\n                            { \n                                \"type\": \"ui.Image\",\n                                \"frame\":[0, 0, 165, 124] ,\n                                \"fixedSize\": true,\n                                \"image\": \"locked\",\n                                \"formulas\": [\n                                    ($ ->\n                                        if $dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked\n                                            o.image = o.parent.data[0].thumb.name)\n                                    ($ ->\n                                        if !$dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked\n                                            o.image = \"locked\")\n                                ]\n                            }\n                        ]\n                    }\n                }\n            }\n        }\n    ]\n}",
        "compiledContent": "// Generated by CoffeeScript 1.12.7\n(function() {\n  ui.UiFactory.layouts.cgGalleryLayout = {\n    \"type\": \"ui.FreeLayout\",\n    \"orientation\": \"vertical\",\n    \"preload\": {\n      \"graphics\": [\n        {\n          \"name\": $(function() {\n            return $dataFields.database.system.menuBackground.name || 'bg-generic';\n          })\n        }, {\n          \"path\": $(function() {\n            return $dataFields.database.cgGalleryArray;\n          }),\n          \"image\": $(function() {\n            var ref, ref1;\n            return (ref = (ref1 = o.thumb) != null ? ref1.name : void 0) != null ? ref : o;\n          })\n        }, {\n          \"path\": [\"locked\"],\n          \"image\": $(function() {\n            return o;\n          })\n        }\n      ]\n    },\n    \"frame\": [0, 0, Graphics.width, Graphics.height],\n    \"controls\": [\n      {\n        \"id\": \"background\",\n        \"type\": \"ui.Image\",\n        \"imageHandling\": 0,\n        \"image\": function() {\n          return $dataFields.database.system.menuBackground.name || 'bg-generic';\n        },\n        \"frame\": [0, 0, Graphics.width, Graphics.height]\n      }, {\n        \"type\": \"ui.Button\",\n        \"id\": \"backButton\",\n        \"params\": {\n          \"text\": {\n            \"lcId\": \"B0FD4BF121D9E44E7589CDD35869F86F2227\",\n            \"defaultText\": \"Back\"\n          },\n          \"action\": {\n            \"name\": \"previousLayout\"\n          }\n        },\n        \"frame\": [Graphics.width - 170, Graphics.height - 65, 150, 45],\n        \"order\": 1\n      }, {\n        \"type\": \"ui.TitledWindow\",\n        \"components\": [\n          {\n            \"type\": \"Component_HotspotBehavior\",\n            \"params\": {}\n          }\n        ],\n        \"id\": \"galleryWindow\",\n        \"frame\": [20, 0, 220, Graphics.height],\n        \"params\": {\n          \"title\": {\n            \"lcId\": \"F957AB5C572C3642839AAB12D429F0C1AA3C\",\n            \"defaultText\": \"Chapters\"\n          }\n        }\n      }, {\n        \"type\": \"ui.DataScrollView\",\n        \"frame\": [20, 10 + 45, 220, Graphics.height - 45 - 10],\n        \"params\": {\n          \"spacing\": [10, 10],\n          \"columns\": 1,\n          \"dataSource\": $(function() {\n            return $dataFields.chapters;\n          }),\n          \"template\": {\n            \"size\": [220, 45],\n            \"descriptor\": {\n              \"type\": \"ui.Text\",\n              \"formulas\": [\n                $(function() {\n                  o.text = $dataFields.chapters[o.index].items.name;\n                  if (this.onInitialize && o.index === 0) {\n                    return o.ui.selected = true;\n                  }\n                })\n              ],\n              \"font\": {\n                \"name\": \"Times New Roman\",\n                \"italic\": true,\n                \"size\": 45\n              },\n              \"style\": \"selectableText\",\n              \"selectable\": true,\n              \"group\": \"chapters\",\n              \"frame\": [0, 0],\n              \"sizeToFit\": true,\n              \"action\": {\n                \"event\": \"onAccept\",\n                \"name\": \"executeFormulas\",\n                \"params\": [\n                  $(function() {\n                    return $scrollView.controls[1].behavior.dataSource = $dataFields.cgGalleryByChapter[$dataFields.chapters[o.index].uid];\n                  })\n                ]\n              }\n            }\n          }\n        }\n      }, {\n        \"type\": \"ui.TitledWindow\",\n        \"components\": [\n          {\n            \"type\": \"Component_HotspotBehavior\",\n            \"params\": {}\n          }\n        ],\n        \"id\": \"galleryWindow\",\n        \"frame\": [260, 0, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height],\n        \"params\": {\n          \"title\": {\n            \"lcId\": \"A80D12A37EE45448BD2A2695D7C86820AB03\",\n            \"defaultText\": \"Gallery\"\n          }\n        }\n      }, {\n        \"type\": \"ui.DataScrollView\",\n        \"chainOrder\": 3,\n        \"id\": \"scrollView\",\n        \"frame\": [260, 10 + 45, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height - 45 - 10],\n        \"params\": {\n          \"spacing\": [10, 10],\n          \"columns\": Math.floor(gs.UIConstants.CG_GALLERY_CONTENT_WIDTH / 165),\n          \"dataSource\": $(function() {\n            var ref;\n            return $dataFields.cgGalleryByChapter[(ref = $dataFields.chapters[0]) != null ? ref.uid : void 0];\n          }),\n          \"template\": {\n            \"size\": [165, 124],\n            \"descriptor\": {\n              \"type\": \"ui.FreeLayout\",\n              \"frame\": [0, 0],\n              \"sizeToFit\": true,\n              \"group\": \"gallery\",\n              \"style\": \"cgGalleryImage\",\n              \"controls\": [\n                {\n                  \"type\": \"ui.Frame\",\n                  \"style\": \"cgGalleryImageFrame\",\n                  \"frame\": [0, 0, \"100%\", \"100%\"],\n                  \"padding\": [-16, -16, -16, -16],\n                  \"zIndex\": 10,\n                  \"actions\": [\n                    {\n                      \"condition\": {\n                        \"field\": $(function() {\n                          return o.parent.controls[1].image;\n                        }),\n                        \"notEqualTo\": $(function() {\n                          return 'locked';\n                        })\n                      },\n                      \"name\": \"executeFormulas\",\n                      \"params\": [\n                        $(function() {\n                          return $tempFields.selectedImage = o.parent.data[0].graphic.name;\n                        })\n                      ]\n                    }, {\n                      \"condition\": {\n                        \"field\": $(function() {\n                          return o.parent.controls[1].image;\n                        }),\n                        \"notEqualTo\": $(function() {\n                          return 'locked';\n                        })\n                      },\n                      \"name\": \"switchLayout\",\n                      \"params\": {\n                        \"name\": \"cgGalleryImageLayout\",\n                        \"savePrevious\": true\n                      }\n                    }\n                  ]\n                }, {\n                  \"type\": \"ui.Image\",\n                  \"frame\": [0, 0, 165, 124],\n                  \"fixedSize\": true,\n                  \"image\": \"locked\",\n                  \"formulas\": [\n                    $(function() {\n                      if ($dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked) {\n                        return o.image = o.parent.data[0].thumb.name;\n                      }\n                    }), $(function() {\n                      if (!$dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked) {\n                        return o.image = \"locked\";\n                      }\n                    })\n                  ]\n                }\n              ]\n            }\n          }\n        }\n      }\n    ]\n  };\n\n}).call(this);\n"
    },
    "summary": [
        "name",
        "type",
        "order"
    ],
    "externalItems": []
}