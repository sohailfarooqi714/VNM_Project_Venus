// Generated by CoffeeScript 1.12.7
(function() {
  ui.UiFactory.layouts.cgGalleryLayout = {
    "type": "ui.FreeLayout",
    "orientation": "vertical",
    "preload": {
      "graphics": [
        {
          "name": $(function() {
            return $dataFields.database.system.menuBackground.name || 'bg-generic';
          })
        }, {
          "path": $(function() {
            return $dataFields.database.cgGalleryArray;
          }),
          "image": $(function() {
            var ref, ref1;
            return (ref = (ref1 = o.thumb) != null ? ref1.name : void 0) != null ? ref : o;
          })
        }, {
          "path": ["locked"],
          "image": $(function() {
            return o;
          })
        }
      ]
    },
    "frame": [0, 0, Graphics.width, Graphics.height],
    "controls": [
      {
        "id": "background",
        "type": "ui.Image",
        "imageHandling": 0,
        "image": function() {
          return $dataFields.database.system.menuBackground.name || 'bg-generic';
        },
        "frame": [0, 0, Graphics.width, Graphics.height]
      }, {
        "type": "ui.Button",
        "id": "backButton",
        "params": {
          "text": {
            "lcId": "B0FD4BF121D9E44E7589CDD35869F86F2227",
            "defaultText": "Back"
          },
          "action": {
            "name": "previousLayout"
          }
        },
        "frame": [Graphics.width - 170, Graphics.height - 65, 150, 45],
        "order": 1
      }, {
        "type": "ui.TitledWindow",
        "components": [
          {
            "type": "Component_HotspotBehavior",
            "params": {}
          }
        ],
        "id": "galleryWindow",
        "frame": [20, 0, 220, Graphics.height],
        "params": {
          "title": {
            "lcId": "F957AB5C572C3642839AAB12D429F0C1AA3C",
            "defaultText": "Chapters"
          }
        }
      }, {
        "type": "ui.DataScrollView",
        "frame": [20, 10 + 45, 220, Graphics.height - 45 - 10],
        "params": {
          "spacing": [10, 10],
          "columns": 1,
          "dataSource": $(function() {
            return $dataFields.chapters;
          }),
          "template": {
            "size": [220, 45],
            "descriptor": {
              "type": "ui.Text",
              "formulas": [
                $(function() {
                  o.text = $dataFields.chapters[o.index].items.name;
                  if (this.onInitialize && o.index === 0) {
                    return o.ui.selected = true;
                  }
                })
              ],
              "font": {
                "name": "Times New Roman",
                "italic": true,
                "size": 45
              },
              "style": "selectableText",
              "selectable": true,
              "group": "chapters",
              "frame": [0, 0],
              "sizeToFit": true,
              "action": {
                "event": "onAccept",
                "name": "executeFormulas",
                "params": [
                  $(function() {
                    return $scrollView.controls[1].behavior.dataSource = $dataFields.cgGalleryByChapter[$dataFields.chapters[o.index].uid];
                  })
                ]
              }
            }
          }
        }
      }, {
        "type": "ui.TitledWindow",
        "components": [
          {
            "type": "Component_HotspotBehavior",
            "params": {}
          }
        ],
        "id": "galleryWindow",
        "frame": [260, 0, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height],
        "params": {
          "title": {
            "lcId": "A80D12A37EE45448BD2A2695D7C86820AB03",
            "defaultText": "Gallery"
          }
        }
      }, {
        "type": "ui.DataScrollView",
        "chainOrder": 3,
        "id": "scrollView",
        "frame": [260, 10 + 45, gs.UIConstants.CG_GALLERY_CONTENT_WIDTH, Graphics.height - 45 - 10],
        "params": {
          "spacing": [10, 10],
          "columns": Math.floor(gs.UIConstants.CG_GALLERY_CONTENT_WIDTH / 165),
          "dataSource": $(function() {
            var ref;
            return $dataFields.cgGalleryByChapter[(ref = $dataFields.chapters[0]) != null ? ref.uid : void 0];
          }),
          "template": {
            "size": [165, 124],
            "descriptor": {
              "type": "ui.FreeLayout",
              "frame": [0, 0],
              "sizeToFit": true,
              "group": "gallery",
              "style": "cgGalleryImage",
              "controls": [
                {
                  "type": "ui.Frame",
                  "style": "cgGalleryImageFrame",
                  "frame": [0, 0, "100%", "100%"],
                  "padding": [-16, -16, -16, -16],
                  "zIndex": 10,
                  "actions": [
                    {
                      "condition": {
                        "field": $(function() {
                          return o.parent.controls[1].image;
                        }),
                        "notEqualTo": $(function() {
                          return 'locked';
                        })
                      },
                      "name": "executeFormulas",
                      "params": [
                        $(function() {
                          return $tempFields.selectedImage = o.parent.data[0].graphic.name;
                        })
                      ]
                    }, {
                      "condition": {
                        "field": $(function() {
                          return o.parent.controls[1].image;
                        }),
                        "notEqualTo": $(function() {
                          return 'locked';
                        })
                      },
                      "name": "switchLayout",
                      "params": {
                        "name": "cgGalleryImageLayout",
                        "savePrevious": true
                      }
                    }
                  ]
                }, {
                  "type": "ui.Image",
                  "frame": [0, 0, 165, 124],
                  "fixedSize": true,
                  "image": "locked",
                  "formulas": [
                    $(function() {
                      if ($dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked) {
                        return o.image = o.parent.data[0].thumb.name;
                      }
                    }), $(function() {
                      if (!$dataFields.globalData.cgGallery[o.parent.data[0].index].unlocked) {
                        return o.image = "locked";
                      }
                    })
                  ]
                }
              ]
            }
          }
        }
      }
    ]
  };

}).call(this);
