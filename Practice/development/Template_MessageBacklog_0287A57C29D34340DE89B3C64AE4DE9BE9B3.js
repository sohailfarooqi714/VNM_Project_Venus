// Generated by CoffeeScript 1.12.7
(function() {
  ui.UiFactory.customTypes["ui.MessageBacklog"] = {
    "id": "backlogScrollView",
    "type": "ui.DataScrollView",
    "zIndex": 80000,
    "order": 80001,
    "frame": [0, 0, Graphics.width, Graphics.height],
    "params": {
      "dataSource": $(function() {
        return $dataFields.backlog;
      }),
      "template": {
        "size": [Graphics.width, 200],
        "descriptor": {
          "type": "ui.FreeLayout",
          "frame": [0, 0, Graphics.width, 200],
          "controls": [
            {
              "type": "ui.FreeLayout",
              "frame": [0, 20, Graphics.width / 4, 30],
              "controls": [
                {
                  "type": "ui.Text",
                  "styles": ["backlogNameText"],
                  "frame": [0, 0],
                  "margin": [0, 0, 20, 0],
                  "sizeToFit": true,
                  "alignmentX": "right",
                  "zIndex": 82000,
                  "formulas": [
                    $(function() {
                      var c, ref;
                      c = $dataFields.backlog[o.parent.parent.index].character;
                      o.text = (ref = c != null ? c.name : void 0) != null ? ref : "";
                      if (c != null ? c.textColor : void 0) {
                        return o.font.color.setFromObject(c.textColor);
                      }
                    })
                  ],
                  "text": "Name"
                }
              ]
            }, {
              "type": "ui.Text",
              "styles": ["messageText"],
              "frame": [Graphics.width / 4 + 20, 20, Graphics.width * 0.7, 0],
              "sizeToFit": {
                "horizontal": false,
                "vertical": true
              },
              "formatting": true,
              "wordWrap": true,
              "zIndex": 82000,
              "order": 80001,
              "formulas": [
                $(function() {
                  return o.visible = !$dataFields.backlog[o.parent.index].isChoice;
                }), $(function() {
                  if (!$dataFields.backlog[o.parent.index].isChoice) {
                    return o.text = $dataFields.backlog[o.parent.index].message;
                  }
                }), $(function() {
                  if ($dataFields.backlog[o.parent.index].isChoice) {
                    return o.text = $dataFields.backlog[o.parent.index].choice.text;
                  }
                })
              ],
              "text": ""
            }, {
              "type": "ui.FreeLayout",
              "alignmentX": 1,
              "sizeToFit": true,
              "formulas": [
                $(function() {
                  return o.visible = $dataFields.backlog[o.parent.index].isChoice;
                })
              ],
              "controls": [
                {
                  "type": "ui.Window",
                  "formulas": [
                    $(function() {
                      return o.controls[0].image = "selection";
                    })
                  ],
                  "frame": [0, 0, 750, 50],
                  "margin": [0, 0, 0, 30],
                  "zIndex": 4999
                }, {
                  "type": "ui.Text",
                  "sizeToFit": true,
                  "styles": ["regularUIText"],
                  "alignmentX": "center",
                  "alignmentY": "center",
                  "frame": [0, 12],
                  "margin": [0, 0, 0, 30],
                  "formulas": [
                    $(function() {
                      if ($dataFields.backlog[o.parent.parent.index].isChoice) {
                        return o.text = $dataFields.backlog[o.parent.parent.index].choice.text;
                      }
                    })
                  ],
                  "zIndex": 5100
                }
              ]
            }
          ],
          "margin": [0, 0, 0, 20]
        }
      }
    },
    "zIndex": 81000
  };

  ui.UiFactory.customTypes["ui.MessageBacklogBox"] = {
    "type": "ui.FreeLayout",
    "order": 80000,
    "id": "backlog",
    "formulas": [
      $(function() {
        return $backlogScrollView.controls[1].behavior.scrollToEnd();
      }, null, "uiPrepareFinish")
    ],
    "controls": [
      {
        "type": "ui.Panel",
        "animations2": [
          {
            "event": "onInitialize",
            "flow": [
              {
                "type": "appear",
                "animation": {
                  "type": 1
                },
                "duration": 30,
                "wait": true
              }
            ]
          }, {
            "event": "onTerminate",
            "flow": [
              {
                "type": "disappear",
                "animation": {
                  "type": 1
                },
                "duration": 30,
                "wait": true
              }
            ]
          }
        ],
        "modal": true,
        "order": 800,
        "style": "backlogMessagePanel",
        "zIndex": 80000,
        "frame": [0, 0, Graphics.width, Graphics.height]
      }, {
        "type": "ui.Panel",
        "animations2": [
          {
            "event": "onInitialize",
            "flow": [
              {
                "type": "appear",
                "animation": {
                  "type": 1
                },
                "duration": 30,
                "wait": true
              }
            ]
          }, {
            "event": "onTerminate",
            "flow": [
              {
                "type": "disappear",
                "animation": {
                  "type": 1
                },
                "duration": 30,
                "wait": true
              }
            ]
          }
        ],
        "style": "backlogNamePanel",
        "zIndex": 80000,
        "frame": [0, 0, Graphics.width / 4, Graphics.height]
      }, {
        "type": "ui.MessageBacklog"
      }
    ],
    "frame": [0, 0, Graphics.width, Graphics.height]
  };

}).call(this);
